{"subtasks":[{"id":"subtask-1","content":"In electron/main.js add editor detection: check for Cursor (which cursor or darwin /Applications/Cursor.app) and VS Code (which code or /Applications/Visual Studio Code.app). Return an array of { id: 'cursor'|'vscode', label: string, available: boolean }. Register IPC handler review-locally:get-editors that invokes this logic and returns the array.","label":"Electron editor detection","activeForm":"Adding Electron editor detection","type":"dev"},{"id":"subtask-2","content":"In electron/main.js add IPC handler review-locally:open-editor that accepts { worktreePath: string, editorId: 'cursor'|'vscode' }. Validate worktreePath is under a safe base (project or user home) and that path exists (fs.existsSync). Spawn the appropriate command (cursor <path> or code <path>; on darwin optionally use open -a). Use spawn with { detached: true, stdio: 'ignore' }. Return { success: boolean, error?: string }.","label":"Electron open editor IPC","activeForm":"Adding Electron open editor IPC","type":"dev"},{"id":"subtask-3","content":"In electron/main.js add IPC handler review-locally:open-folder that accepts { worktreePath: string }. Validate path exists and is a directory. Use shell.openPath(worktreePath) or platform-specific command (macOS: open, Windows: explorer, Linux: xdg-open). Return { success: boolean, error?: string }.","label":"Electron open folder IPC","activeForm":"Adding Electron open folder IPC","type":"dev"},{"id":"subtask-4","content":"In electron/preload.js expose getAvailableEditors(), openEditorAtPath(worktreePath, editorId), and openFolder(worktreePath) via contextBridge, invoking review-locally:get-editors, review-locally:open-editor, and review-locally:open-folder. In src/types/electron.d.ts extend ElectronAPI with these methods and add type for editor list ({ id: string, label: string }[]).","label":"Preload and Electron types","activeForm":"Exposing preload and Electron types","type":"dev"},{"id":"subtask-5","content":"In HumanReviewModal read projectPath from useProjectStore(). Compute worktreePath as projectPath ? path.join(projectPath, '.code-auto', 'worktrees', task.id) : null. Detect Electron with typeof window !== 'undefined' && window.electron. When no projectPath or no Electron, disable Review Locally and Open in File Explorer and show short message (e.g. no project path or Use desktop app).","label":"Worktree path and Electron check","activeForm":"Adding worktree path and Electron check","type":"dev"},{"id":"subtask-6","content":"In HumanReviewModal replace the separate Review Changes Locally button and VS Code card with a single Review Locally section: on mount/open when Electron call getAvailableEditors() and store in state. Show icons/labels for each available editor; default primary to first available (Cursor preferred). Primary button opens selected editor via openEditorAtPath(worktreePath, selectedEditorId). On success show toast with worktree path; on failure show toast error. Optional dropdown or secondary buttons to switch between Cursor and VS Code when both available.","label":"Unify Review Locally with IDE picker","activeForm":"Unifying Review Locally with IDE picker","type":"dev"},{"id":"subtask-7","content":"In HumanReviewModal wire the File Explorer card: on button click call window.electron.openFolder(worktreePath) with same projectPath/worktreePath validation. Show success toast with worktree path on success and error toast on failure.","label":"Wire Open in File Explorer","activeForm":"Wiring Open in File Explorer","type":"dev"},{"id":"subtask-8","content":"In HumanReviewModal handle edge cases: if worktree path does not exist show toast error (Worktree not found at ...) and do not call open; if no editor available show No IDE found and disable primary Review Locally button or message; when not in Electron do not call IPC and show disabled state or Use desktop app for Review Locally and Open in File Explorer.","label":"Edge cases in HumanReviewModal","activeForm":"Handling edge cases in HumanReviewModal","type":"dev"},{"id":"subtask-qa-1","content":"Run yarn build (or npm run build) and verify there are no build errors. If there are errors report them clearly without changing code.","label":"Verify build","activeForm":"Verifying build","type":"qa"},{"id":"subtask-qa-2","content":"Run TypeScript check (yarn tsc --noEmit or npm run typecheck if defined) and ESLint; fix any type or lint errors in the modified files only, or report if pre-existing.","label":"Verify types and lint","activeForm":"Verifying types and lint","type":"qa"}]}
